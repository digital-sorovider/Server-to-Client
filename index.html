<!DOCTYPE html>
<html>

<head>
    <title>Server-to-Client</title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/jquery"></script>
</head>

<style>
.radio {
    color:white;
    display: inline;
}

#status {
    display: none
}

</style>

<body style='background:rgb(65, 65, 65)'>
    <h3 style='color:white'>サーバーの状態をリアルタイム表示</h3>
        <input type="text" id="port" placeholder="ポート番号" required>

    <input type="radio" name="protocol" value='TCP'><div class=radio>TCP</div>
    <input type="radio" name="protocol" value='UDP'><div class=radio>UDP</div>

    <h3 id="status"></h3>
    <h4 id="messages"></h4>

    <script>
        var socket_c = io();

        $(function () {
            socket_c.on('message_s', function (msg) {
                // $('#messages').fadeOut(0).text(msg).fadeIn('slow');
                $('#messages').text(msg).fadeIn('slow');
            });

            socket_c.on('server_status', function (status, col) {
                // $('#status').fadeOut(0).text(status).css('color', col).fadeIn('slow');
                $('#status').text(status).css('color', col).fadeIn('slow');
            });

            $('#port').keyup(function() {
                if (!Number.isNaN(Number($('#port').val()))) {
                    socket_c.emit('port_c', $('#port').val())
                } else {
                    socket_c.emit('port_c', $('#port').val(''))
                }

            });

            socket_c.on('port', function (port_num) {
                $('#port').val(port_num)
            })

            socket_c.on('protocol', function (pro) {
                $('input[name=protocol]').val([pro]);
            })

            $('input[name="protocol"]:radio').change(function () {
                socket_c.emit('protocol_c', $('input[name=protocol]:checked').val())
            });
        });
    </script>
</body>



</html>